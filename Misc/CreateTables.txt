CREATE TABLE Locations (
	name 			NVARCHAR(40)    		NOT NULL UNIQUE,
);


CREATE TABLE Places (
	name 			NVARCHAR(4)     		NOT NULL UNIQUE,
);


CREATE TABLE Types (
	name			NVARCHAR(50)     		NOT NULL UNIQUE,
);


CREATE TABLE Statuses (
	name			NVARCHAR(25)    		NOT NULL UNIQUE,
);


CREATE TABLE Boxes (
  	id 			INT IDENTITY(1,1) 		NOT NULL,
  	number 			VARCHAR(10)	   		NOT NULL UNIQUE,
  	initialLocation 	NVARCHAR(40) 			FOREIGN KEY REFERENCES Locations (Name) NOT NULL,
  	currentPlace		NVARCHAR(4) 			FOREIGN KEY REFERENCES Places (Name) NOT NULL,
  	status 			NVARCHAR(25) 			FOREIGN KEY REFERENCES Statuses (Name) NOT NULL,
	type 			NVARCHAR(50) 			FOREIGN KEY REFERENCES Types (Name),
	note   			NVARCHAR(100)
);


CREATE TABLE Batches (
	id 			INT IDENTITY(1,1) 		NOT NULL,
	number 			VARCHAR(30)	   		NOT NULL UNIQUE,
	box    			VARCHAR(10)			FOREIGN KEY REFERENCES Boxes (number),
);


CREATE TABLE Groups (
	name			NVARCHAR(50)     		NOT NULL UNIQUE,
	canAddBoxes		BIT				NOT NULL DEFAULT 1,
	canRemoveBoxes		BIT				NOT NULL DEFAULT 0,
);


CREATE TABLE Users (
	id 			INT IDENTITY(1,1) 		NOT NULL,
	login 			VARCHAR(30)			NOT NULL UNIQUE,	
	status			VARCHAR(25)			NOT NULL,
	isOnline		BIT				NOT NULL DEFAULT 0						
);


CREATE TABLE Using (
	id 			INT IDENTITY(1,1) 		NOT NULL,
	box 			VARCHAR(10)			FOREIGN KEY REFERENCES Boxes (number) NOT NULL,
	customer 		VARCHAR(30)			FOREIGN KEY REFERENCES Users (login) NOT NULL,
	timeStarted		SMALLDATETIME			NOT NULL,
	timeFinished		SMALLDATETIME			NOT NULL,
	blockReassign		BIT				NOT NULL DEFAULT 0,
	partialUsing		BIT				NOT NULL DEFAULT 0
);